{"version":3,"sources":["../../server/middlewares/auth.js"],"names":["module","exports","req","res","next","authorization","headers","status","json","error","token","split","trim","jwt","verify","JWT_SECRET","err","decodedData","authData"],"mappings":";;AAAA;;;;AACA;;;;AAEAA,OAAOC,OAAP,GAAiB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAAA,MAC3BC,aAD2B,GACTH,IAAII,OADK,CAC3BD,aAD2B;;;AAGnC,MAAI,CAACA,aAAL,EAAoB;AAClBF,QAAII,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,cAAQ,GADW;AAEnBE,aAAO;AAFY,KAArB;AAID,GALD,MAKO;AACL,QAAMC,QAAQL,cAAcM,KAAd,CAAoB,GAApB,EAAyB,CAAzB,EAA4BC,IAA5B,EAAd;;AAEAC,2BAAIC,MAAJ,CAAWJ,KAAX,EAAkBK,kBAAlB,EAA8B,UAACC,GAAD,EAAMC,WAAN,EAAsB;AAClD,UAAID,GAAJ,EAAS;AACPb,YAAII,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,kBAAQ,GADW;AAEnBE,iBAAO;AAFY,SAArB;AAID;;AAEDP,UAAIgB,QAAJ,GAAeD,WAAf;AACAb;AACD,KAVD;AAWD;AACF,CAvBD","file":"auth.js","sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport {JWT_SECRET} from '../config'\r\n\r\nmodule.exports = (req, res, next) => {\r\n  const { authorization } = req.headers;\r\n\r\n  if (!authorization) {\r\n    res.status(401).json({\r\n      status: 401,\r\n      error: 'Authentication failed! Please Login again',\r\n    });\r\n  } else {\r\n    const token = authorization.split(' ')[1].trim();\r\n\r\n    jwt.verify(token, JWT_SECRET, (err, decodedData) => {\r\n      if (err) {\r\n        res.status(401).json({\r\n          status: 401,\r\n          error: 'Authentication failed! Please Login again',\r\n        });\r\n      }\r\n\r\n      req.authData = decodedData;\r\n      next();\r\n    });\r\n  }\r\n};"]}