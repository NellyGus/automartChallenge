{"version":3,"sources":["../../server/controllers/order_controller.js"],"names":["OrderController","request","response","car_id","created_on","status","price","price_offered","send","message","order","id","order_model","length","body","toLowerCase","push","found","find","parseInt","params","order_id","res","json","error","new_price_offered","orderController"],"mappings":";;;;;;;;AAAA;;;;;;;;;;IAEMA,e;;;;;;;kCACQC,O,EAASC,Q,EAAS;AACxB,gBAAG,CAACD,QAAQE,MAAT,IAAmB,CAACF,QAAQG,UAA5B,IAA0C,CAACH,QAAQI,MAAnD,IACI,CAACJ,QAAQK,KADb,IACsB,CAACL,QAAQM,aADlC,EACgD;AACxCL,yBAASG,MAAT,CAAgB,GAAhB,EAAqBG,IAArB,CAA0B;AACtBH,4BAAQ,GADc;AAEtBI,6BAAS;AAFa,iBAA1B;AAIH,aANL,MAMS;AACD,oBAAMC,QAAQ;AACVC,wBAAIC,sBAAYC,MAAZ,GAAqB,CADf;AAEVV,4BAAQF,QAAQa,IAAR,CAAaX,MAFX;AAGVC,gCAAYH,QAAQa,IAAR,CAAaV,UAHf;AAIVC,4BAAQJ,QAAQa,IAAR,CAAaT,MAAb,CAAoBU,WAApB,EAJE;AAKVT,2BAAOL,QAAQa,IAAR,CAAaR,KALV;AAMVC,mCAAeN,QAAQa,IAAR,CAAaP;AANlB,iBAAd;AAQAK,sCAAYI,IAAZ,CAAiBN,KAAjB;;AAEA,uBAAOR,SAASG,MAAT,CAAgB,GAAhB,EAAqBG,IAArB,CAA0B;AAC7BH,4BAAQ,GADqB;AAE7BI,6BAAS,wBAFoB;AAG7BC;AAH6B,iBAA1B,CAAP;AAKH;AACR;;;oCACWT,O,EAASC,Q,EAAS;AAC1B,gBAAMe,QAAQL,sBAAYM,IAAZ,CAAiB,UAACR,KAAD,EAAW;AACtC,uBAAOA,MAAMC,EAAN,KAAaQ,SAASlB,QAAQmB,MAAR,CAAeC,QAAxB,CAApB;AACH,aAFa,CAAd;AAGA,gBAAGJ,KAAH,EAAS;AAAA;;AACL,oBAAMP,QAAOO,KAAb;AACA,oBAAGP,MAAML,MAAN,KAAgB,UAAhB,IAA8BK,MAAML,MAAN,KAAgB,UAAjD,EAA4D;AACxD,2BAAOiB,IAAIjB,MAAJ,CAAW,GAAX,EAAgBkB,IAAhB,CAAqB;AACxBlB,gCAAQ,GADgB;AAExBmB,+BAAO;AAFiB,qBAArB,CAAP;AAIH;AACDd,sBAAMJ,KAAN,GAAaL,QAAQa,IAAR,CAAaW,iBAA1B;AACA,uBAAOvB,SAASG,MAAT,CAAgB,GAAhB,EAAqBG,IAArB;AACHH,4BAAQ,GADL;AAEHM,wBAAID,MAAMC,EAFP;AAGHR,4BAAQO,MAAMP;AAHX,oEAIKO,MAAML,MAJX,+DAKgBK,MAAMH,aALtB,+DAMgBG,MAAMe,iBANtB,0BAAP;AAQH,aAjBD,MAiBK;AACD,uBAAOvB,SAASG,MAAT,CAAgB,GAAhB,EAAqBG,IAArB,CAA0B;AAC7BH,4BAAQ,GADqB;AAE7BI,6BAAS;AAFoB,iBAA1B,CAAP;AAIH;AACJ;;;;;;AAGL,IAAMiB,kBAAiB,IAAI1B,eAAJ,EAAvB;kBACe0B,e","file":"order_controller.js","sourcesContent":["import order_model from '../model/order_model';\r\n\r\nclass OrderController {\r\n    makeOrder(request, response){\r\n        if(!request.car_id || !request.created_on || !request.status\r\n            || !request.price || !request.price_offered){\r\n                response.status(400).send({\r\n                    status: 400,\r\n                    message: 'Each field is required, retry please'\r\n                });\r\n            }else{\r\n                const order = {\r\n                    id: order_model.length + 1,\r\n                    car_id: request.body.car_id,\r\n                    created_on: request.body.created_on,\r\n                    status: request.body.status.toLowerCase(),\r\n                    price: request.body.price,\r\n                    price_offered: request.body.price_offered\r\n                }\r\n                order_model.push(order);\r\n\r\n                return response.status(201).send({\r\n                    status: 201,\r\n                    message: 'car added successfully',\r\n                    order\r\n                });\r\n            }\r\n    }\r\n    updatePrice(request, response){\r\n        const found = order_model.find((order) => {\r\n            return order.id === parseInt(request.params.order_id);\r\n        });\r\n        if(found){\r\n            const order= found;\r\n            if(order.status=== 'accepted' || order.status=== 'rejected'){\r\n                return res.status(400).json({\r\n                    status: 400,\r\n                    error: 'Cannot update price. Order status is either accepted or rejected',\r\n                  });\r\n            }\r\n            order.price= request.body.new_price_offered;\r\n            return response.status(200).send({\r\n                status: 200,\r\n                id: order.id,\r\n                car_id: order.car_id,\r\n                status: order.status,\r\n                old_price_offered: order.price_offered,\r\n                new_price_offered: order.new_price_offered\r\n            }); \r\n        }else{\r\n            return response.status(404).send({\r\n                status: 404,\r\n                message: 'Order not found'\r\n            });\r\n        } \r\n    }\r\n}\r\n\r\nconst orderController= new OrderController();\r\nexport default orderController;"]}